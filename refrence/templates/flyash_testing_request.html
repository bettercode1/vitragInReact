{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Fly Ash/GGBS Testing - Material Inward</h2>
    <form method="post">
        <div class="mb-3">
            <label for="customer_select" class="form-label">Select Existing Customer</label>
            <select id="customer_select" name="customer_select" class="form-select">
                <option value="">-- Select Existing Customer --</option>
                <option disabled style="font-style: italic; color: #6c757d;">(New customers must be added from the Customers page)</option>
                <option disabled>──────────────</option>
                {% for customer in customers %}
                <option value="{{ customer.id }}" 
                    data-name="{{ customer.name }}"
                    data-contact="{{ customer.contact_person or '' }}"
                    data-phone="{{ customer.phone or '' }}"
                    data-email="{{ customer.email or '' }}"
                    data-site="{{ customer.site_name or '' }}">
                    {{ customer.name }}
                </option>
                {% endfor %}
            </select>
            <div class="form-text">
                Select an existing customer from the dropdown. To add a new customer, please <a href="{{ url_for('add_customer_form') }}" class="fw-bold">go to the Customers page</a> first.
            </div>
        </div>
        <div class="mb-3">
            <label for="customer_name" class="form-label">Customer Name</label>
            <input type="text" class="form-control" id="customer_name" name="customer_name" required>
        </div>
        <div class="mb-3">
            <label for="inward_date" class="form-label">Inward Date</label>
            <input type="date" class="form-control" id="inward_date" name="inward_date" required>
        </div>
        <button type="submit" class="btn btn-primary">Proceed</button>
    </form>
</div>

<script>
document.getElementById('customer_select').addEventListener('change', function() {
    const selectedOption = this.options[this.selectedIndex];
    if (selectedOption.value) {
        document.getElementById('customer_name').value = selectedOption.dataset.name;
    }
});
</script>
{% endblock %} 