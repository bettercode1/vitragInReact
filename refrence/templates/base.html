<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>{% block title %}Vitrag Associates LLP - Construction Material Testing{% endblock %}</title>
    
    <!-- Bootstrap 5 from Replit CDN -->
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Google Fonts - Roboto and Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
    
    <!-- Ensure phone numbers aren't auto-linked on mobile -->
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            touch-action: manipulation; /* Prevents double-tap zoom on touch devices */
        }
        h1, h2, h3, h4, h5, h6, .navbar-brand, .btn {
            font-family: 'Montserrat', sans-serif;
        }
        
        /* Ensure better text visibility on mobile */
        @media (max-width: 768px) {
            body {
                font-size: 16px; /* Better readability on small screens */
                overflow-x: hidden; /* Prevent horizontal scrolling */
            }
            
            /* Improve form fields on mobile */
            input[type="text"], 
            input[type="number"],
            input[type="email"],
            input[type="password"],
            input[type="date"],
            select, textarea {
                font-size: 16px !important; /* Prevents iOS zoom on focus */
                height: auto !important;
            }
            
            /* Optimize table scrolling */
            .table-responsive {
                -webkit-overflow-scrolling: touch; /* Smoother scrolling on iOS */
            }
            
            /* Ensure buttons are easy to tap on mobile */
            .btn, 
            button, 
            [role="button"], 
            input[type="button"], 
            input[type="submit"] {
                min-height: 44px; /* Improves tap target size */
                min-width: 44px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
            }
            
            /* Optimize form width on narrow screens */
            .container {
                max-width: 100%;
                padding-left: 12px;
                padding-right: 12px;
            }
            
            /* Make card headers more compact */
            .card-header {
                padding: 0.75rem !important;
            }
            
            /* Fix navbar on small screens */
            .navbar-collapse {
                max-height: 80vh;
                overflow-y: auto;
            }
            
            /* Force navbar text to be large enough to read */
            .nav-link {
                font-size: 1rem !important;
                padding: 0.75rem 1rem !important;
            }
        }
        
        /* Fix iOS form input zoom */
        @media screen and (-webkit-min-device-pixel-ratio: 0) { 
            select:focus,
            textarea:focus,
            input:focus {
                font-size: 16px !important;
            }
        }
        
        /* Fix jQuery UI datepicker month and year text visibility */
        .ui-datepicker .ui-datepicker-month,
        .ui-datepicker .ui-datepicker-year {
            color: #000000 !important;
            background: transparent !important;
        }
        
        .ui-datepicker select.ui-datepicker-month,
        .ui-datepicker select.ui-datepicker-year {
            color: #000000 !important;
            background-color: #ffffff !important;
        }
    </style>
    
    {% block styles %}{% endblock %}
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{{ url_for('index') }}">
                <img src="{{ url_for('static', filename='images/logo.png') }}?v={{ range(1000, 9999) | random }}" alt="Vitrag Associates Logo" height="40" class="me-2 d-none d-sm-block">
                <img src="{{ url_for('static', filename='images/logo.png') }}?v={{ range(1000, 9999) | random }}" alt="Vitrag Associates Logo" height="32" class="me-2 d-sm-none">
                <span style="color: #FFD700;" class="d-none d-md-inline">Vitrag Associates LLP</span>
                <span style="color: #FFD700;" class="d-md-none">Vitrag</span>
            </a>
            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('index') %}active{% endif %}" href="{{ url_for('index') }}">
                            <i class="fas fa-home me-2"></i><span class="d-lg-inline">Home</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('dashboard') %}active{% endif %}" href="{{ url_for('dashboard') }}">
                            <i class="fas fa-tachometer-alt me-2"></i><span class="d-lg-inline">Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('test_request_form') %}active{% endif %}" href="{{ url_for('test_request_form') }}">
                            <i class="fas fa-file-alt me-2"></i><span class="d-lg-inline d-none d-md-inline">New Cube Test</span><span class="d-md-none">Test</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('samples') %}active{% endif %}" href="{{ url_for('samples') }}">
                            <i class="fas fa-list me-2"></i><span class="d-lg-inline d-none d-md-inline">Sample Cube Test Register</span><span class="d-md-none">List</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('customers') %}active{% endif %}" href="{{ url_for('customers') }}">
                            <i class="fas fa-users me-2"></i><span class="d-lg-inline">Customers</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.path == url_for('calibration_dashboard') %}active{% endif %}" href="{{ url_for('calibration_dashboard') }}">
                            <i class="fas fa-tools me-2"></i><span class="d-lg-inline">Calibration</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        
        {% block content %}{% endblock %}
    </div>

    <footer class="footer mt-5 py-3 bg-dark">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <p class="text-muted">
                        &copy; 2025 <span style="color: #FFD700;">Vitrag Associates LLP</span>. All rights reserved.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-muted">
                        <span style="color: #FFA500;">Construction Material Testing Laboratory</span>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5 Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
