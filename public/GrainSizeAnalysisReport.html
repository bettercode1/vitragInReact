<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="timestamp" content="2025-01-27-v1">
  <title>Vitrag Associates LLP - Grain Size Analysis Test Report (A4)</title>
  <script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root{
      --paper-width:210mm;
      --paper-height:297mm;
      --page-padding:14mm;
      --title-color:#b30000;
      --subtitle-color:#063a6c;
      --inner-border:1px solid #222;
      --muted:#666;
      --header-font:'Times New Roman', Times, serif;
      --base-font-size:16px;
    }

    @page { size: A4; margin: 10mm; }
    html,body{height:100%; margin:0; padding:0;}
    body{
      font-family:var(--header-font);
      -webkit-print-color-adjust:exact;
      background:#ffffff;
      margin:0;
      padding:0;
      color:#111;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
    }

    .page{
      width:var(--paper-width);
      min-height:var(--paper-height);
      background:#fff;
      box-shadow:0 0 20px rgba(0,0,0,0.1);
      padding:var(--page-padding);
      box-sizing:border-box;
      position:relative;
      font-size:var(--base-font-size);
      line-height:1.15;
      margin:20px 0;
      border:1px solid #ddd;
    }

     /* Header */
     .header{ width:100%; border-collapse:collapse; table-layout:fixed; }
     .header td{ border:1px solid #111; vertical-align:middle; padding:12px 16px; }
     .logo-cell{ width:3.26cm; text-align:center; }
     .logo-cell img{ width:3.26cm; height:auto; object-fit:contain; }
     .title-cell{ text-align:center; font-weight:700; }
     .title-cell h1{ margin:0; font-size:33px; font-weight:700; color:var(--title-color); text-transform:uppercase; line-height:1.0; }
     .title-cell .subtitle{ display:block; margin-top:8px; font-size:19px; font-weight:700; color:var(--subtitle-color); line-height:1.0; white-space:nowrap; }

     /* Title box */
     .box{ margin-top:10px; border:1px solid #111; font-weight:700; font-size:16px; text-transform:uppercase; text-decoration:underline; text-underline-offset: 4px; height:1cm; width:100%; display:flex; align-items:center; justify-content:center; }

    /* Metadata table */
    .meta-wrap{ margin-top:10px; }
    table.meta{ 
      width:100% !important; 
      border-collapse:collapse; 
      table-layout:fixed !important; 
      word-wrap: break-word;
    }
    
    /* Force table layout and column widths */
    table.meta col:nth-child(1) { width: 20% !important; }
    table.meta col:nth-child(2) { width: 30% !important; }
    table.meta col:nth-child(3) { width: 20% !important; }
    table.meta col:nth-child(4) { width: 30% !important; }
    table.meta td{ 
      border:1px solid #111; 
      padding:0 6px; 
      height:0.7cm; 
      vertical-align:middle; 
      font-size:14.67px;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
    }
    
    /* Force column widths with constraints */
    table.meta td:nth-child(1){ 
      width: 20% !important; 
      max-width: 20% !important; 
      min-width: 20% !important; 
      overflow: hidden;
    }
    table.meta td:nth-child(2){ 
      width: 30% !important; 
      max-width: 30% !important; 
      min-width: 30% !important; 
    }
    table.meta td:nth-child(3){ 
      width: 20% !important; 
      max-width: 20% !important; 
      min-width: 20% !important; 
      overflow: hidden;
    }
    table.meta td:nth-child(4){ 
      width: 30% !important; 
      max-width: 30% !important; 
      min-width: 30% !important; 
    }
    
    /* Special case for merged cell in Sample Condition row */
    table.meta tr:nth-child(5) td:nth-child(3){ 
      width: 50% !important; 
      max-width: 50% !important; 
      min-width: 50% !important; 
    }
    
    /* Responsive text sizing for long content */
    #sample-description, #environmental-conditions {
        font-size: 12px !important;
        line-height: 1.2;
        word-wrap: break-word;
        overflow-wrap: break-word;
    }
    
    /* Adjust cell height for smaller text */
    #sample-description, #environmental-conditions {
        height: auto !important;
        min-height: 0.7cm;
        padding: 2px 6px !important;
    }

    /* Test result */
    .test-result{ margin-top:24px; padding:0; }
     .test-result h3{ margin:0; text-align:center; font-size:16px; font-weight:700; text-transform:uppercase; text-decoration:underline; text-underline-offset: 4px; border:none; }

    table.results{ width:100%; border-collapse:collapse; margin-top:8px; font-size:14.67px; table-layout:auto; }
    table.results th, table.results td{ border:1px solid #111; text-align:center; vertical-align:middle; }
    table.results thead th{ background:#f7f2f2; font-weight:700; font-size:16px; padding:4px; }
    table.results tbody tr{ height:0.8cm; }
    table.results th:first-child, table.results td:first-child{ width:0.5% !important; min-width:0.5% !important; max-width:0.5% !important; }
    table.results th:nth-child(2){ width:50%; text-align:center; }
    table.results td:nth-child(2){ width:50%; text-align:left; padding-left:8px; }
    table.results th:nth-child(3), table.results td:nth-child(3){ width:16.67%; }
    table.results th:nth-child(4), table.results td:nth-child(4){ width:16.67%; }
    table.results th:nth-child(5), table.results td:nth-child(5){ width:16.67%; }
    table.results tfoot td{ border:1px solid #111; height:1.2cm; font-weight:700; text-align:left; padding-left:6px; }
    table.results tfoot td:first-child{ text-align:right; padding-right:6px; }
    table.results tfoot td:last-child{ text-align:center; }
    table.results tfoot tr:nth-child(2) td{ height:60mm; vertical-align:top; text-align:left; padding:8px; font-weight:normal; }
    table.results tfoot tr:nth-child(3) td, table.results tfoot tr:nth-child(4) td, table.results tfoot tr:nth-child(5) td{ height:0.7cm; font-weight:700; padding:4px; text-align:left; }
    
    /* Force column widths for signature table */
    table.results tfoot tr:nth-child(3) td:first-child{ width:25% !important; }
    table.results tfoot tr:nth-child(3) td:nth-child(2){ width:30% !important; }
    table.results tfoot tr:nth-child(3) td:last-child{ width:35% !important; }
    table.results tfoot tr:nth-child(4) td:first-child{ width:25% !important; }
    table.results tfoot tr:nth-child(4) td:nth-child(2){ width:30% !important; }
    table.results tfoot tr:nth-child(4) td:last-child{ width:35% !important; }
    table.results tfoot tr:nth-child(5) td:first-child{ width:25% !important; }
    table.results tfoot tr:nth-child(5) td:nth-child(2){ width:30% !important; }
    table.results tfoot tr:nth-child(5) td:last-child{ width:35% !important; }

    .sig-title{ font-weight:700; }

     .doc-footer{ position:absolute; bottom:2mm; left:var(--page-padding); right:var(--page-padding); text-align:center; font-size:16px; color:var(--muted); }

    /* Observation table */
    .observation-table{ width:100%; border-collapse:collapse; margin-top:15px; font-size:14.67px; }
    .observation-table th, .observation-table td{ border:1px solid #111; padding:6px; text-align:center; vertical-align:middle; }
    .observation-table th{ background:#f7f2f2; font-weight:700; font-size:16px; }
    .observation-table td{ text-align:left; padding-left:8px; }

    /* Percentage summary table */
    .summary-table{ width:100%; border-collapse:collapse; margin-top:15px; font-size:14.67px; }
    .summary-table th, .summary-table td{ border:2px solid #000; padding:8px; text-align:center; vertical-align:middle; }
    .summary-table th{ background:#343a40; color:white; font-weight:700; font-size:16px; }
    .summary-table .sub-header{ background:#495057; color:white; font-weight:700; font-size:14px; }
    .summary-table .size-header{ background:#6c757d; color:white; font-weight:700; font-size:12px; }
    .summary-table td{ background:#f8f9fa; font-weight:700; }

    /* Download PDF Button */
    .download-btn{ 
      position:fixed; 
      top:20px; 
      right:20px; 
      background:#28a745; 
      color:white; 
      border:none; 
      padding:12px 20px; 
      border-radius:6px; 
      font-size:14px; 
      font-weight:bold; 
      cursor:pointer; 
      box-shadow:0 2px 8px rgba(0,0,0,0.2);
      z-index:1000;
    }
    .download-btn:hover{ background:#218838; }

    @media print{ 
      body{ 
        background:white; 
        margin: 0;
                padding: 0;
            }
      .page{ 
        box-shadow:none; 
        margin: 0;
        padding: 14mm;
        width: 210mm;
        min-height: 297mm;
        max-height: 297mm;
        overflow: hidden;
      } 
      .download-btn{ display:none !important; }
      
      /* Ensure exact A4 dimensions */
      @page {
        size: A4;
                margin: 0;
            }
            
      /* Hide any elements that might cause page breaks */
      .page * {
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
            }
        }
  </style>
</head>
<body>
  <div class="page">

             <table class="header">
        <tr>
          <td class="logo-cell"><img src="/logo.png" alt="Vitrag Associates logo"></td>
          <td class="title-cell">
            <h1>VITRAG ASSOCIATES LLP</h1>
            <div class="subtitle">(CONSTRUCTION MATERIAL TESTING LABORATORY)</div>
          </td>
        </tr>
             </table>

    <div class="meta-wrap">
      <table class="meta">
        <colgroup>
          <col style="width: 20%;">
          <col style="width: 30%;">
          <col style="width: 20%;">
          <col style="width: 30%;">
        </colgroup>
        <tr>
          <td colspan="4" style="text-align:center; font-weight:bold; text-decoration:underline; font-size:21.33px; height:1cm;">Determination of Grain Size Analysis</td>
        </tr>
        <tr>
          <td><strong>Sample Test Code Number</strong></td>
          <td id="sample-test-code"></td>
          <td><strong>Sample Description</strong></td>
          <td id="sample-description"></td>
        </tr>
        <tr>
          <td><strong>Date of Receipt</strong></td>
          <td id="date-of-receipt"></td>
          <td><strong>Date of Testing</strong></td>
          <td id="date-of-testing"></td>
        </tr>
        <tr>
          <td><strong>Quantity</strong></td>
          <td id="quantity"></td>
          <td><strong>Test Method</strong></td>
          <td id="test-method" style="text-align: left; vertical-align: middle; font-weight: bold;"><strong>IS 2720 (PART 4)-1985</strong></td>
        </tr>
        <tr>
          <td><strong>Sample Condition</strong></td>
          <td colspan="3" id="sample-condition"></td>
        </tr>
      </table>
            </div>

             <!-- Observation Section -->
             <div style="margin-top: 0px;">
                 <h4 style="text-align: center; font-weight: bold; text-decoration: underline; font-size: 21.33px; margin-top: 0px; margin-bottom: 8px;">Observation</h4>
                 <table style="width: 100%; border-collapse: collapse; border: 1px solid #111; font-size: 14.67px;">
                     <tbody>
                         <tr>
                             <td style="border: 1px solid #111; padding: 4px; font-weight: bold; width: 20px; text-align: center;">1.</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 75%;">Total Oven dried weight of representative sample:</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 20%; text-align: center;" id="total-oven-dried-weight"></td>
                         </tr>
                         <tr>
                             <td style="border: 1px solid #111; padding: 4px; font-weight: bold; width: 20px; text-align: center;">2.</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 75%;">Quantity Retained on 80 mm Sieve:</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 20%; text-align: center;" id="quantity-retained-80mm"></td>
                         </tr>
                         <tr>
                             <td style="border: 1px solid #111; padding: 4px; font-weight: bold; width: 20px; text-align: center;">3.</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 75%;">Quantity of Material Passing 80 mm Sieve:</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 20%; text-align: center;" id="quantity-passing-80mm"></td>
                         </tr>
                         <tr>
                             <td style="border: 1px solid #111; padding: 4px; font-weight: bold; width: 20px; text-align: center;">4.</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 75%;">Shape of Particles: (1) Rounded (2) Sub-Rounded (3) Angular (4) Sub-Angular</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 20%; text-align: center;" id="particle-shape"></td>
                         </tr>
                         <tr>
                             <td style="border: 1px solid #111; padding: 4px; font-weight: bold; width: 20px; text-align: center;">5.</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 75%;">Quantity taken for test:</td>
                             <td style="border: 1px solid #111; padding: 4px; width: 20%; text-align: center;" id="quantity-taken-for-test"></td>
                         </tr>
                     </tbody>
                 </table>
             </div>

            <!-- Sieve Analysis Table -->
            <div style="margin-top: 24px;">
                <table class="observation-table">
                    <thead>
                        <tr>
                            <th style="width: 150px;">IS Sieve Size (mm)</th>
                            <th style="width: 150px;">Weight of Soil retained (gm)</th>
                            <th style="width: 100px;">% Retained</th>
                            <th style="width: 100px;">% Passing</th>
                            <th style="width: 200px;">Remarks (about sample)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">80</td>
                            <td id="weight-80"></td>
                            <td id="percent-retained-80"></td>
                            <td id="percent-passing-80"></td>
                            <td id="remarks-80"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">20</td>
                            <td id="weight-20"></td>
                            <td id="percent-retained-20"></td>
                            <td id="percent-passing-20"></td>
                            <td id="remarks-20"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">4.75</td>
                            <td id="weight-475"></td>
                            <td id="percent-retained-475"></td>
                            <td id="percent-passing-475"></td>
                            <td id="remarks-475"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">2.000</td>
                            <td id="weight-2000"></td>
                            <td id="percent-retained-2000"></td>
                            <td id="percent-passing-2000"></td>
                            <td id="remarks-2000"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">0.600</td>
                            <td id="weight-0600"></td>
                            <td id="percent-retained-0600"></td>
                            <td id="percent-passing-0600"></td>
                            <td id="remarks-0600"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">0.425</td>
                            <td id="weight-0425"></td>
                            <td id="percent-retained-0425"></td>
                            <td id="percent-passing-0425"></td>
                            <td id="remarks-0425"></td>
                        </tr>
                        <tr>
                            <td style="text-align: center; font-weight: bold;">0.075</td>
                            <td id="weight-0075"></td>
                            <td id="percent-retained-0075"></td>
                            <td id="percent-passing-0075"></td>
                            <td id="remarks-0075"></td>
                        </tr>
                    </tbody>
                </table>
            </div>

             <!-- Percentage Summary Table -->
             <div style="margin-top: 0px;">
                 <h4 style="text-align: center; font-weight: bold; font-size: 21.33px; margin-top: 0px; margin-bottom: 8px;">PERCENTAGE SUMMARY</h4>
                 <table style="width: 100%; border-collapse: collapse; border: 1px solid #111; font-size: 14.67px;">
                     <thead>
                         <tr style="background: #f7f2f2;">
                             <th colspan="2" style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 16px;">GRAVEL</th>
                             <th colspan="3" style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 16px;">SAND</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 16px;">SLIT & CLAY</th>
                         </tr>
                         <tr style="background: #f7f2f2;">
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">Coarse Gravel<br/>(80-20mm)</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">Fine Gravel<br/>(20-4.75mm)</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">Coarse Sand<br/>(4.75-2.00mm)</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">Medium Sand<br/>(2.00-0.425mm)</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">Fine Sand<br/>(0.425-0.075)</th>
                             <th style="border: 1px solid #111; padding: 8px; font-weight: bold; text-align: center; font-size: 14.67px;">&lt;0.075mm</th>
                         </tr>
                     </thead>
                     <tbody>
                         <tr>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="coarse-gravel-percent"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="fine-gravel-percent"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="coarse-sand-percent"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="medium-sand-percent"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="fine-sand-percent"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="silt-clay-percent"></td>
                         </tr>
                         <tr>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="coarse-gravel-percent-2"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="fine-gravel-percent-2"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="coarse-sand-percent-2"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="medium-sand-percent-2"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="fine-sand-percent-2"></td>
                             <td style="border: 1px solid #111; padding: 16px; text-align: center;" id="silt-clay-percent-2"></td>
                         </tr>
                     </tbody>
                 </table>
             </div>

            <!-- Signatures Section -->
            <div style="margin-top: 24px;">
                <table style="width: 100%; border-collapse: collapse; border: 1px solid #111;">
                    <tr>
                        <td class="sig-title" colspan="2" style="width:25% !important; border: 1px solid #111; padding: 6px;">Tested By: <span id="tested-by-name">John Doe</span></td>
                        <td class="sig-title" colspan="2" style="width:30% !important; border: 1px solid #111; padding: 6px;">Checked By: <span id="checked-by-name">Jane Smith</span></td>
                        <td class="sig-title" colspan="3" style="width:35% !important; border: 1px solid #111; padding: 6px;">Verified By: <span id="verified-by-name">Prakarsh A Sangave</span></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="width:25% !important; border: 1px solid #111; padding: 6px;"><strong>Date:</strong> <span id="tested-by-date"></span></td>
                        <td colspan="2" style="width:30% !important; border: 1px solid #111; padding: 6px;"><strong>Date:</strong> <span id="checked-by-date"></span></td>
                        <td colspan="3" style="width:35% !important; border: 1px solid #111; padding: 6px;"><strong>Date:</strong> <span id="verified-by-date"></span></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="width:25% !important; border: 1px solid #111; padding: 6px;"><strong>Sign:</strong></td>
                        <td colspan="2" style="width:30% !important; border: 1px solid #111; padding: 6px;"><strong>Sign:</strong></td>
                        <td colspan="3" style="width:35% !important; border: 1px solid #111; padding: 6px;"><strong>Sign:</strong></td>
                    </tr>
                </table>
            </div>


            </div>


  <!-- Download PDF Button -->
  <button class="download-btn" onclick="downloadPDF()">📄 Download PDF</button>

    <script>
        // Function to populate form data from URL parameters
        function populateFormData() {
            const urlParams = new URLSearchParams(window.location.search);
            
            // General Information
      document.getElementById('sample-test-code').textContent = urlParams.get('sample_test_code') || '';
      document.getElementById('sample-description').textContent = urlParams.get('sample_description') || '';
      document.getElementById('date-of-receipt').textContent = urlParams.get('date_of_receipt') || '';
      document.getElementById('date-of-testing').textContent = urlParams.get('date_of_testing') || '';
      document.getElementById('quantity').textContent = urlParams.get('quantity') || '';
      document.getElementById('sample-condition').textContent = urlParams.get('sample_condition') || '';
      
      // Test Method - keep default if not provided
      const testMethodValue = urlParams.get('test_method') || 'IS 2720 (PART 4)-1985';
      document.getElementById('test-method').innerHTML = '<strong>' + testMethodValue + '</strong>';
      
      // Observation data
      document.getElementById('total-oven-dried-weight').textContent = urlParams.get('total_oven_dried_weight') || '';
      document.getElementById('quantity-retained-80mm').textContent = urlParams.get('quantity_retained_80mm') || '';
      document.getElementById('quantity-passing-80mm').textContent = urlParams.get('quantity_passing_80mm') || '';
      document.getElementById('particle-shape').textContent = urlParams.get('particle_shape') || '';
      document.getElementById('quantity-taken-for-test').textContent = urlParams.get('quantity_taken_for_test') || '';
      
      // Sieve Analysis Data
      document.getElementById('weight-80').textContent = urlParams.get('weight_80') || '';
      document.getElementById('percent-retained-80').textContent = urlParams.get('percent_retained_80') || '';
      document.getElementById('percent-passing-80').textContent = urlParams.get('percent_passing_80') || '';
      document.getElementById('remarks-80').textContent = urlParams.get('remarks_80') || '';
      
      document.getElementById('weight-20').textContent = urlParams.get('weight_20') || '';
      document.getElementById('percent-retained-20').textContent = urlParams.get('percent_retained_20') || '';
      document.getElementById('percent-passing-20').textContent = urlParams.get('percent_passing_20') || '';
      document.getElementById('remarks-20').textContent = urlParams.get('remarks_20') || '';
      
      document.getElementById('weight-475').textContent = urlParams.get('weight_475') || '';
      document.getElementById('percent-retained-475').textContent = urlParams.get('percent_retained_475') || '';
      document.getElementById('percent-passing-475').textContent = urlParams.get('percent_passing_475') || '';
      document.getElementById('remarks-475').textContent = urlParams.get('remarks_475') || '';
      
      document.getElementById('weight-2000').textContent = urlParams.get('weight_2000') || '';
      document.getElementById('percent-retained-2000').textContent = urlParams.get('percent_retained_2000') || '';
      document.getElementById('percent-passing-2000').textContent = urlParams.get('percent_passing_2000') || '';
      document.getElementById('remarks-2000').textContent = urlParams.get('remarks_2000') || '';
      
      document.getElementById('weight-0600').textContent = urlParams.get('weight_0600') || '';
      document.getElementById('percent-retained-0600').textContent = urlParams.get('percent_retained_0600') || '';
      document.getElementById('percent-passing-0600').textContent = urlParams.get('percent_passing_0600') || '';
      document.getElementById('remarks-0600').textContent = urlParams.get('remarks_0600') || '';
      
      document.getElementById('weight-0425').textContent = urlParams.get('weight_0425') || '';
      document.getElementById('percent-retained-0425').textContent = urlParams.get('percent_retained_0425') || '';
      document.getElementById('percent-passing-0425').textContent = urlParams.get('percent_passing_0425') || '';
      document.getElementById('remarks-0425').textContent = urlParams.get('remarks_0425') || '';
      
      document.getElementById('weight-0075').textContent = urlParams.get('weight_0075') || '';
      document.getElementById('percent-retained-0075').textContent = urlParams.get('percent_retained_0075') || '';
      document.getElementById('percent-passing-0075').textContent = urlParams.get('percent_passing_0075') || '';
      document.getElementById('remarks-0075').textContent = urlParams.get('remarks_0075') || '';
      
      // Percentage Summary Data
      document.getElementById('coarse-gravel-percent').textContent = urlParams.get('coarse_gravel_percent') || '';
      document.getElementById('fine-gravel-percent').textContent = urlParams.get('fine_gravel_percent') || '';
      document.getElementById('coarse-sand-percent').textContent = urlParams.get('coarse_sand_percent') || '';
      document.getElementById('medium-sand-percent').textContent = urlParams.get('medium_sand_percent') || '';
      document.getElementById('fine-sand-percent').textContent = urlParams.get('fine_sand_percent') || '';
      document.getElementById('silt-clay-percent').textContent = urlParams.get('silt_clay_percent') || '';
      
      document.getElementById('coarse-gravel-percent-2').textContent = urlParams.get('coarse_gravel_percent_2') || '';
      document.getElementById('fine-gravel-percent-2').textContent = urlParams.get('fine_gravel_percent_2') || '';
      document.getElementById('coarse-sand-percent-2').textContent = urlParams.get('coarse_sand_percent_2') || '';
      document.getElementById('medium-sand-percent-2').textContent = urlParams.get('medium_sand_percent_2') || '';
      document.getElementById('fine-sand-percent-2').textContent = urlParams.get('fine_sand_percent_2') || '';
      document.getElementById('silt-clay-percent-2').textContent = urlParams.get('silt_clay_percent_2') || '';
      
      // Signatures
      document.getElementById('tested-by-name').textContent = urlParams.get('tested_by_name') || 'John Doe';
      document.getElementById('tested-by-date').textContent = urlParams.get('tested_by_date') || '';
      document.getElementById('checked-by-name').textContent = urlParams.get('checked_by_name') || 'Jane Smith';
      document.getElementById('checked-by-date').textContent = urlParams.get('checked_by_date') || '';
      document.getElementById('verified-by-name').textContent = urlParams.get('verified_by_name') || 'Prakarsh A Sangave';
      document.getElementById('verified-by-date').textContent = urlParams.get('verified_by_date') || '';
        }
        

        // Populate form data when page loads
        window.onload = function() {
            populateFormData();
        };

        // Print function
        function printReport() {
            window.print();
        }

        // Download PDF function - Opens print dialog with custom filename
        function downloadPDF() {
            console.log('Download PDF clicked');
            
            // Get customer name for default filename
            const urlParams = new URLSearchParams(window.location.search);
            const testedByName = urlParams.get('tested_by_name') || 'John_Doe';
            const sampleTestCode = urlParams.get('sample_test_code') || 'ST-001';
            const dateOfTesting = urlParams.get('date_of_testing') || new Date().toISOString().split('T')[0];
            
            // Create default filename
            const customerName = testedByName.replace(/\s+/g, '_');
            const defaultFilename = `Grain_Size_Analysis_Test_Report_${customerName}_${sampleTestCode}_${dateOfTesting}.pdf`;
            
            // Set the document title for print dialog
            document.title = defaultFilename;
            
            // Add print-specific CSS
            const printStyle = document.createElement('style');
            printStyle.textContent = `
              @media print {
                body { margin: 0; padding: 0; }
                .page { box-shadow: none; margin: 0; }
                .no-print { display: none !important; }
              }
            `;
            document.head.appendChild(printStyle);
            
            // Hide the download button during print
            const downloadBtn = document.querySelector('button[onclick="downloadPDF()"]');
            if (downloadBtn) {
              downloadBtn.classList.add('no-print');
            }
            
            // Open print dialog directly without pop-up
            window.print();
            
            // Clean up after print
            setTimeout(() => {
              if (downloadBtn) {
                downloadBtn.classList.remove('no-print');
              }
              document.head.removeChild(printStyle);
            }, 1000);
        }
    </script>
</body>
</html>
